# 中台

在以前数据往往只被显示，慢慢地人们需要随时随地查找数据，存储数据的概念被普遍认知。

进入互联网时代后，数据存储有了比较明显的变化，互联网时代进入了爆发期，此时产生了大量的数据，人们通过数据挖掘，收集大量的外界数据作为决策的依据。

然后，人们渐渐产生了数据思维，发现可以通过观看数据来制定运营策略。

于是，大公司纷纷去打造自家的数据中台，将海量的数据作为自身的资产，并利用数据中台将数据进行整合，最后通过数据智能分析，以数据驱动决策，这就是数据中台。

# 数据中台价值

数据中台的使命是利用大数据技术，通过全局规划来治理好企业的数据资产，让数据使用者能随时随地获取到可靠的数据。

数据中台的价值，如下图所示：

![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/649e9cd443d84bcfbcf1e3db24a35b6a.png)

数据中台，主要包含如下三大价值：

**1. 帮助企业建立数据标准**

数据中台的建设天然会帮助企业建设数据标准，包括数据建设规范和数据消费规范。

数据建设规范有诸如数据接入规范、数据建模规范、数据存储规范和数据安全规范等。这些标准都是建设数据中台时必须建立起来并依托数据中台去执行和落地的。

**2. 促进中台组织形成**

再宏伟的企业战略规划，都离不开一套科学合理的组织去落地执行，数据中台这种体系化工程将横向拉通企业数据相关方。

包括：中台建设团队、中台运维团队、以及数据产品经、数据运营团队等，从而形成企业真正的中台组织。

**3. 全面赋能业务，促使降本增效**

数据中台的终极价值是降本增效，无论是建设数据标准，还是形成中台组织，其核心目标都是**帮助企业充分利用数据的价值**。

# 数据中台架构

数据中台屏蔽掉底层存储平台的计算技术复杂性，与上层的数据应用之间的一整套体系，通过数据中台的数据汇聚，让数据的使用成本更低。

数据中台的架构，如下图所示：

![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/60236d9d730b41b98947ac92366577b6.png)



数据中台架构，主要会涉及到三层：工具平台层、数据资产层、数据应用层。

**1.工具平台层**

工具平台层是数据中台的载体，包含大数据处理的基础能力技术，比如：集数据采集、数据存储、数据计算、数据安全等于一体的大数据平台。

**2.数据资产层**

数据资产层是数据中台的核心层，它依托于工具平台层，划分为主题域模型区、标签模型区和算法模型区。

**1)主题域模型**

主题域模型是指面向业务分析，比如：订单、合同、营销等业务抽象的集合。

**2）标签模型**

标签模型的设计，与主题域模型方法大同小异，同样需要结合业务过程进行设计。

标签一般会涉及企业经营过程中的实体对象，比如：会员、商品、门店、经销商等，这些主体一般来说都穿插在各个业务流程中，比如：下订单就穿插相关流程。

**3)算法模型**

算法模型搭建过程包含：定场景、数据源准备、特征工程、模型设计、模型训练、正式上线、参数调整7个环节。

**3.数据应用层**

数据应用层严格来说不属于数据中台的范畴，但数据中台的使命就是为业务赋能，几乎所有企业在建设数据中台的同时都已规划好数据应用。

# 数据中台建设案例

**阿A里数据中台**，如下图所示：

![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/0be679e489634c078e83c0448f11a983.png?x-oss-process=image/resize,w_1400/format,webp)

阿A里数据中台，主要体现如下4个方面：

- **全域数据采集与引入**：
  以需求为驱动，以数据多样性的全域思想为指导，采集与引入全业务。
- **标准规范数据架构与研发**：
  统一基础层，通过数据指标结构化规范化的方式实现指标口径统一。
- **连接与深度萃取数据价值**：
  形成以业务核心对象为中心的连接和标签体系，深度萃取数据价值。
- **统一数据资产管理**：
  通过资产分析、应用、优化、运营四方面对看清数据资产，降低数据管理成本，追踪数据价值。

**网易严选中台架构图**

如下图所示，基于数仓里已经半加工好的数据，再通过BI 平台快速的根据业务需求进行数据可视化和数据分析。

![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/8e857c621ee4465b932fb4f29fcad845.png?x-oss-process=image/resize,w_1400/format,webp)

网易云音乐数据中台架构

**最底层是基础设施层**：这包括资源环境和平台工具两部分。

**第二层是数据层**：数据层即网易云音乐的 OneData，包括标准化数仓、数据地图、数据安全中心和保障这套体系的数据质量管理中心。

**第三层是服务层**：服务层即网易云音乐的 OneService。它提供不同层级和粒度的数据 API，包括从最底层的任务执行调度能力，到最面向应用的人群圈定的各类服务能力。

**最上层是产品层**：针对一个个核心业务问题，比如：增长、营收、版权搭建了对应数据产品，实现从业务流程、信息采集、数据洞察到 ROI 评估再到业务流程的完整闭环。

![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/d185334714f4478894aaee15a2e16e53.png?x-oss-process=image/resize,w_1400/format,webp)

某企业数据中台架构图

下面这个数据中台，根据数据资产梳理结果，并以大数据平台的“数据采集 海量存储 计算引擎”为基础搭建公司数据湖。

再基于数据湖并结合“数据资产管理服务”和“智能数据研发服务”两大支撑服务群实现中台数据的资产化管理和智能化开发。
![image.png](https://ucc.alicdn.com/dyur2lmsliddg/developer-article1638746/20241118/7565e4d882704ab1b4d1fbfdcbdb1106.png?x-oss-process=image/resize,w_1400/format,webp)





数据血缘：

#### 1. **核心定义**

- **是什么**：记录数据从源头到终端的全链路流转轨迹，包括数据源抽取、ETL过程、计算加工、API服务输出等节点间的依赖关系。
- **类比**：类似软件开发中的「调用链追踪」，但聚焦于数据流动而非代码执行。

#### 2. **核心作用**

- **故障溯源**：快速定位数据异常源头（如某报表数值错误→逆向追溯上游SQL逻辑）
- **影响分析**：评估数据变更影响范围（如修改某字段后，通知下游15个模型重跑）
- **合规审计**：满足GDPR等法规要求，证明数据来源合法性

#### 3. **技术实现方案**

##### (1) **元数据采集**

sql

复制

```
-- 血缘关系存储表设计（示例）
CREATE TABLE data_lineage (
  id BIGINT PRIMARY KEY,
  source_id VARCHAR(64) COMMENT '源节点ID（如表名+字段）',
  target_id VARCHAR(64) COMMENT '目标节点ID',
  process_id BIGINT COMMENT '处理过程ID（关联ETL任务）',
  lineage_type ENUM('FIELD', 'TABLE') COMMENT '血缘粒度',
  relation_graph JSON COMMENT '图谱快照（存储G6/Neo4j格式）'
);
```

##### (2) **自动捕获技术**

- **静态解析**：解析SQL脚本（通过Calcite/ANTLR提取FROM/JOIN语句）
- **动态追踪**：在Spark/Flink任务中埋点记录输入输出表
- **日志分析**：解析任务日志中的Hive Metastore操作记录

##### (3) **可视化交互**

javascript

复制

```
// 使用AntV G6实现血缘图谱（示例）
const graph = new G6.Graph({
  container: 'lineage-graph',
  layout: { type: 'dagre', rankdir: 'LR' },
  modes: { default: ['drag-node', 'zoom-canvas'] },
  defaultNode: { type: 'rect', labelCfg: { position: 'right' } },
  defaultEdge: { type: 'polyline', style: { radius: 20 } }
});

// 点击节点显示详情
graph.on('node:click', evt => {
  const node = evt.item;
  showMetadata(node.getModel().id); // 联动元数据面板
});
```

#### 4. **典型业务场景**

- **场景1**：某电商报表GMV异常，通过血缘发现是用户画像标签计算任务使用了过期数据源
- **场景2**：数仓重构时，确认修改ods.order表结构会影响下游12个ADS层模型



数据质量规划：

#### 1. **核心定义**

- **是什么**：对数据特征进行约束的布尔逻辑表达式，用于自动检测数据异常。
- **分类**：
  - **完整性**：非空校验、主键唯一性
  - **准确性**：数值范围校验、正则匹配
  - **一致性**：跨表冗余字段比对、历史波动阈值

#### 2. **核心作用**

- **事前预防**：在数据接入环节拦截脏数据（如手机号格式错误）
- **事中监控**：实时检测流数据异常（如Kafka消息流中的负库存值）
- **事后评估**：生成数据质量评分报告，指导治理优先级

#### 3. **技术实现方案**

##### (1) **规则配置体系**

java

复制

```
// 质量规则实体类设计（示例）
public class DataQualityRule {
    private Long id;
    private String ruleName;
    private RuleScope scope;      // 表级/字段级
    private RuleType type;        // 空值检查/格式检查/自定义SQL
    private String expression;    // 如"${age} BETWEEN 0 AND 150"
    private String alertChannel;  // 邮件/钉钉/Webhook
}
```

##### (2) **规则执行引擎**

python

复制

```
# 质量检查执行伪代码
def execute_rule(data_frame, rule):
    if rule.type == 'NOT_NULL':
        invalid_data = data_frame.filter(data_frame[rule.field].isNull())
    elif rule.type == 'REGEX':
        pattern = re.compile(rule.expression)
        invalid_data = data_frame.filter(~data_frame[rule.field].rlike(pattern))
    return invalid_data.count()
```

##### (3) **质量看板**

vue

复制

```
<!-- 质量评分仪表盘示例 -->
<template>
  <el-row>
    <el-col :span="8">
      <el-statistic title="完整率" :value="qualityScores.completeness * 100" suffix="%" />
    </el-col>
    <el-col :span="16">
      <ve-histogram :data="violationTrendChart" />
    </el-col>
  </el-row>
</template>
```

#### 4. **典型业务场景**

- **场景1**：金融风控系统检测到身份证号字段有5%数据不符合公安部编码规则，触发数据清洗工单
- **场景2**：物流订单数据中始发地-目的地组合逻辑冲突（如「北京→上海」耗时300小时），自动冻结异常订单

------

### **三、血缘与质量规则的协同**

#### 1. **血缘驱动质量检查**

- 根据血缘关系自动继承质量规则（如上游表的「手机号格式」规则自动应用到下游模型）

#### 2. **质量异常关联分析**

mermaid

复制

```
graph LR
  A[质量报警: 订单金额异常] --> B{血缘追溯}
  B --> C[发现数据源: MySQL订单表]
  B --> D[发现转换任务: order_etl_001]
  C --> E[检查源系统日志]
  D --> F[重跑任务验证]
```

#### 3. **技术集成建议**

- **工具选型**：Apache Atlas（血缘管理）+ Great Expectations（质量规则引擎）
- **性能优化**：
  - 血缘存储使用Neo4j图数据库提升关系查询效率
  - 质量检查采用Spark分布式计算处理海量数据

------

### **四、实施路线图**

1. **阶段一**：基础能力建设
   - 搭建元数据管理系统，实现SQL解析自动捕获基础血缘
   - 创建规则管理后台，支持简单的空值/格式校验
2. **阶段二**：智能化增强
   - 引入机器学习自动推荐质量规则（如聚类发现异常模式）
   - 实现动态血缘图谱的版本对比功能
3. **阶段三**：全链路治理
   - 将血缘与质量数据接入运维监控大屏
   - 构建数据健康度指数，关联业务KPI

通过将血缘与质量规则深度整合，可显著提升数据中台的主动治理能力，最终实现从「数据有问题再解决」到「问题数据进不来」的转变。







知乎篇章





## 一、数据中台定义

数据中台是一套可持续“让企业的数据用起来”的机制，一种战略选择和组织形式，是依据企业特有的业务模式和组织架构，通过有形的产品和实施[方法论](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E6%96%B9%E6%B3%95%E8%AE%BA&zhida_source=entity)支撑，构建一套持续不断把数据变成资产并服务于业务的机制。

![img](https://picx.zhimg.com/v2-62e4ca86b5cc1ca51e99bd115d460e6f_1440w.jpg)

## 二、数据中台必须具备4个核心能力

**数据中台需要具备数据汇聚整合、数据提纯加工、数据服务可视化、数据价值变现４个核心能力，让企业员工、客户、伙伴能够方便地应用数据。**

![img](https://pic1.zhimg.com/v2-8ad4211766ba27220a14212a11186a42_1440w.jpg)

**企业数据中台必备4个能力**

**2.1、汇聚整合（数据治理-数据整合和管理能力）**

- 数据丰富和完善：多样的[数据源](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E6%95%B0%E6%8D%AE%E6%BA%90&zhida_source=entity)进行合并和完善
- 管理易用：可视化任务配置、丰富的监控管理功能
- ***数据集成运营**：数据接入、转换、写入或缓存内部来源的各来源数据
- ***数据目录与治理**：用户可以方便定位所需数据，理解数据（技术/业务治理）
- ***数据安全**：确保数据的[访问权限](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90&zhida_source=entity)
- ***数据可用**：用户可简便、可扩展的访问[异构数据](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E5%BC%82%E6%9E%84%E6%95%B0%E6%8D%AE&zhida_source=entity)，可用性和易用性高
- 部署灵活：本地、公有云、[私有云](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E7%A7%81%E6%9C%89%E4%BA%91&zhida_source=entity)等多种署方式

![img](https://pic3.zhimg.com/v2-29320ba1dedf50e5f2aacd652e08de12_1440w.jpg)

**2.2、提纯加工（数据资产化——数据提炼与分析加工能力）**

- 完善的安全[访问控制](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E8%AE%BF%E9%97%AE%E6%8E%A7%E5%88%B6&zhida_source=entity)
- 完善的数据质量保障体系
- 规范的、紧密结合业务的可扩展的标签体系
- 面向业务主题的资产平台
- 智能的[数据映射](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E6%95%B0%E6%8D%AE%E6%98%A0%E5%B0%84&zhida_source=entity)能力，简化数据资产生成

![img](https://pic2.zhimg.com/v2-02c5b4001d3d57dc76b87d16583b61b5_1440w.jpg)

**2.3、服务可视化（数据资产服务化能力）**

- 提供自然语言等人工智能服务
- 提供丰富的[数据分析](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90&zhida_source=entity)功能
- 提供友好的数据可视化服务
- 便捷、快速的服务开发环境，方便业务人员开发数据应用
- 提供实时流数据分析
- 提供[预测分析](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E9%A2%84%E6%B5%8B%E5%88%86%E6%9E%90&zhida_source=entity)、机器学习等高级服务

![img](https://pic3.zhimg.com/v2-e775051c23cd98d6a28be4900b9e3810_1440w.jpg)

**2.4、价值变现**

- 提供数据应用的管理能力
- 提供数据洞察直接驱动业务行动的通路
- 提供跨行业务场景的能力
- 提供跨部门的普适性业务价值能力
- 提供基于场景的数据应用
- 提供业务行动效果评估功能

![img](https://pic1.zhimg.com/v2-5591cf16cfca2cf99ffba8e02fd06612_1440w.jpg)

## 三、数据中台的业务价值和技术价值（优点）

![img](https://picx.zhimg.com/v2-e7ff1fcce2940f854d40f4ae5dffef1b_1440w.jpg)

**数据中台优点**

**3.1业务价值（业务创新，形成核心壁垒）**

1、以客户为中心，用洞察驱动企业稳健行动

2、以数据为基础，直系大规模[商业模式](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E5%95%86%E4%B8%9A%E6%A8%A1%E5%BC%8F&zhida_source=entity)创新

3、盘活全量数据，构筑坚实壁垒已持续领先

**3.2技术价值（成本低、能力多、应用广）**

1、应对多[数据处理](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=1&q=%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86&zhida_source=entity)的需求

2、丰富标签数据，减低管理成本

3、[数据价值](https://zhida.zhihu.com/search?content_id=110262379&content_type=Article&match_order=2&q=%E6%95%B0%E6%8D%AE%E4%BB%B7%E5%80%BC&zhida_source=entity)能体现业务系统效果而不仅是准确度

4、支持跨主题域访问数据

5、数据可以快速复用、不仅是复制

**总结：数据中台是把业务生产资料转变为数据生产力，同时数据生产力反哺业务，不断迭代循环的闭环过程——数据驱动决策、运营**

![img](https://pic3.zhimg.com/v2-ba8b6068ff52c72e26c484c8e68590ba_1440w.jpg)

编辑于 2020-12-23 12:19